<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Developing PhoneGap Apps</title>

		<meta name="description" content="Developing PhoneGap Apps">
		<meta name="author" content="Don Coleman">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h2>Developing PhoneGap Apps</h2>
					<p>MobilePhilly 12/6/12</p>
					<p>
						<small>Don Coleman <br/>
						    Chariot Solutions <br/>
						    <a href="http://twitter.com/doncoleman">@doncoleman</a>
						    
						</small>
					</p>
				</section>

                <section>
                    <blockquote>PhoneGap is an open source solution for building cross-platform mobile apps with standards-based Web technologies like HTML, JavaScript, CSS.</blockquote>
                </section>

                <section>
                    <h1>Cordova</h1>
                    <h2>vs</h2> 
                    <h1>PhoneGap</h1>
                    <aside class="notes">
                        Nitobi, Adobe, ASF

                         Cordova is the open source project.
                         PhoneGap is "sort of the 'official' distribution of Cordova"
                         
                         Use PhoneGap and Cordova interchangeably in this presentation   
                         
                         There are other distributions - IBM Worklight, AppMobi, whatever SAP calls
                         their thing, whatever Salesforce calls theirs.                      
					</aside>                    
                </section>

                <section>
                    <p>Supports Many Platforms</p>
                    <p class="fragment">iOS, Android</p>
					<p class="fragment">Windows Phone, Blackberry</p>
					<p class="fragment">Symbian, Bada, WebOS</p>
					<p class="fragment">Tizen, Chrome, Windows 8</p>
                </section>

                <section>
                    <p>Embeds a web view in a native app</p>
                </section>
                
                <section>
                    <p>JavaScript API</p>
                    <aside class="notes">
                        Ideally this would be the same everywhere. Realistically there are platform quirks, noted in the docs.
					</aside>
					
                </section>                
                
                <section>
                    <h2>Access Device Features</h2>
                    <p>
                    <ul>
                        <li>Accelerometer</li>
                        <li>Camera</li>
                        <li>Capture</li>
                        <li>Compass</li>
                        <li>Connection</li>
                        <li>Contacts</li>
                        <li>Device</li>
                        </ul>
                        <ul>
                        <li>Events</li>                            
                        <li>File</li>
                        <li>Geolocation</li>
                        <li>Globalization</li>
                        <li>Media</li>
                        <li>Notification</li>
                        <li>Storage</li>
                    </ul>
                    </p>
                    <small>
                    <a href="http://docs.phonegap.com/en/2.2.0/index.html">http://docs.phonegap.com/en/2.2.0/index.html</a><br/>
                    <a href="http://phonegap.com/about/feature">http://phonegap.com/about/feature</a>
                    </small>
                </section>

                <section>
                    <p>Your app is a native app</p>
                    <aside class="notes">
                        Compiled
                        Deployed through the app store
                        User's don't know or care that it's build with HTML
                    </aside>
                </section>
                
                <section>
                    <p>Does not provide a UI</p>
                </section>

                <section>
                    <blockquote>Can I wrap any website in PhoneGap and magically have a mobile app?</blockquote>
                </section>

                <section>
                    <h1>NO!</h1>
                    <aside class="notes">
                        Technically could wrap a website, but apple would never approve.
                        Most HTML, JS and CSS lives on the device.                        
                        Use JSON to communicate with the server
					</aside>                    
                </section>

                <section>
                    <p>Single Page App</p>
                </section>                

                <section>
                    <h2>Camera</h2>
                    <pre><code contenteditable>
navigator.camera.getPicture( 
    cameraSuccess, cameraError, [ cameraOptions ] );
                    </code></pre>
                    <small class="fragment"><a href="http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html">http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html</a></small>
                </section>

                <section>
                    <p>API Call</p>                    
                    <pre><code>
navigator.camera.getPicture(
    onSuccess, 
    onFailure, 
    { 
        quality: 50, 
        destinationType: Camera.DestinationType.FILE_URI 
    }
);                         
                    </code></pre>
                </section>

                <section>
                    <p>Callbacks</p>
                    <pre><code contenteditable>
function onSuccess(imageURI) {
    var image = document.getElementById('myImage');
    image.src = imageURI;
}

function onFailure(message) {
    alert('Failed because: ' + message);
}
                    </code></pre>
                </section>                

                <section>
                    <p>Permissions</p>
                    <pre><code>
&lt;uses-permission 
    android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;
                    </pre></code>
                    <aside class="notes">
                        http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html
                    </aside>
                </section>

                <!-- THIS IS A NEW SECTION -->
                <section>
                    Let's build something
                </section>

                <section>
                    <h2>Download</h2>
                    <a href="http://phonegap.com/download">http://phonegap.com/download</a>
                    <aside class="notes">
                        I use a Mac so I'll describe those commands. All this should apply to Linux and Windows too.                        
					</aside>
                </section>
                
                <section>
                    <p>Unzip archive</p>
                    <p class="fragment">move somewhere like /usr/local/phonegap-2.2.0</p>
                    <aside class="notes">
					</aside>
                </section>

                <section>
                    <p>Do you have platform tools installed?</p>
                    <p class="fragment">Xcode</p>
                    <p class="fragment">Android SDK</p>
                    <p class="fragment">Visual Studio</p>                        
                    <aside class="notes">
                        This is a necessary evil
                        Might be able to avoid later with PhoneGap Build
					</aside>
                </section>               
                
                <section>
                    <section>
                        <h1>Demo</h1>
                    </section>
                    
                    <section>
                        <p style="font-size: 1.8em">iOS</p>
                        <pre><code contenteditable>
$ cd /usr/local/phonegap-2.2.0
$ cd lib/ios/bin
$ ./create ~/foo com.example.foo Foo 
$ cd ~/foo
$ ./cordova/emulate                       
(edit www/index.html)
$ ./cordova/debug &amp;&amp; ./cordova/emulate

                        </code></pre>
                        <aside class="notes">
                            ./create --help
                            Usage: ./create [--shared] <path_to_new_project> <package_name> <project_name>
                            	--shared (optional): Link directly against the shared copy of the CordovaLib instead of a copy of it.
                            	<path_to_new_project>: Path to your new Cordova iOS project
                            	<package_name>: Package name, following reverse-domain style convention
                            	<project_name>: Project name


                            use ./cordova/debug to run again
                            or run from with in Xcode
                        </aside>
                    </section>

                    <section>
                        <img src="images/cordova-generated-ios-project.png" />
                    </section>                    
                    
                </section>
                            
                <section>
                    <img src="images/cordova-ios-directory-structure.png" />
                    <aside class="notes">                   
                    </aside>
                </section>

                <section>
                    <img src="images/cordova-ios-directory-structure-annotated.png" />
                </section>
                
                <section>
                    <h2>Android</h2>
                    <pre><code contenteditable>
$ cd /usr/local/phonegap-2.2.0
$ cd lib/android/bin
$ ./create ~/foo com.example.foo Foo 
$ cd ~/foo
$ ./cordova/emulate
(choose an emulator)
(wait for a *long* time)
(keep waiting)                       
$ ./cordova/BOOM
                    </code></pre>
                    <aside class="notes">
                        $ ./create -h
                        usage: create path package activity
                        Make sure the Android SDK tools folder is in your PATH!
                        
                        emulate only starts the emulator
                    </aside>
                </section>

                <section>
                    <img src="images/cordova-generated-android-project.png" />
                </section>
                
                <section>
                    <img src="images/cordova-android-directory-structure.png" />
                    <aside class="notes">
                        TODO annotate this images with
                            assets/www - this is the part you care about                        
                    </aside>
                </section>
                
                <section>
                    <img src="images/cordova-android-directory-structure-annotated.png" />
                </section>
                          
                <section>
                    <p>PhoneGap Getting Started Guides</p>
                    <a href="http://docs.phonegap.com/en/2.2.0/guide_getting-started_index.md.html">http://docs.phonegap.com/en/2.2.0/guide_getting-started_index.md.html</a>
                    <aside class="notes">
                        We'll use the command line
                    </aside>
                </section>
                                
                <section>
                    So we created a project, now what?
                </section>

                <section>
                    The www directory is just a web project
                </section>
                
                <section>
                    <img src="images/www.png">
                </section>

                <section>
                    How does it work?
                    <aside class="notes">
                    <p>load Cordova framework</p>
                    <p>load Application's javascript</p>
                    </aside>
                </section>
                
                <section>
                    <p>index.html</p>
                    <pre><code>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    ...
        &lt;script src="cordova-2.2.0.js"&gt;&lt;/script&gt;
        &lt;script src="js/index.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript"&gt;
            app.initialize();
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                
                <section>
                    <p>index.js</p>
                    <pre><code>
var app = {
    initialize: function() {
        this.bindEvents();
    },
    bindEvents: function() {
        document.addEventListener(
            'deviceready', this.onDeviceReady, false);
    },
    onDeviceReady: function() {
        // your code here
    }
};
                    </code></pre>
                    <aside class="notes">
                        It is important to not call phonegap apis before the deviceready fires
                    </aside>
                </section>
                
                <section>
                    <p>What APIs are there?</p>
                    <a href="http://docs.phonegap.com/en/2.2.0/index.html">http://docs.phonegap.com/en/2.2.0/index.html</a>
                </section>
                                
                <section>
                    <h2>Plugins</h2>
                    <p>Extend PhoneGap</p>
                    <p class="fragment">
                        <a href="https://github.com/phonegap/phonegap-plugins">
                            https://github.com/phonegap/phonegap-plugins</a></p>
                    <aside class="notes">
                        Lots of plugins available<br/>                        
                        Write your own<br/>
                        Great way to see how Cordova works<br/>                        
                    </aside>
                </section>

                <section>
                    PhoneGap is built out of plugins
                </section>
                
                <section>
                    <p>JavaScript to Native Bridge</p>
                    <pre><code>
                cordova.exec(successCallback,
                    failureCallback,
                    service,
                    action, 
                    args)
                    </code></pre>                    
                </section>
                
                <section>
                    <p>Hello World Plugin</p>
                    <small>
                        <a href="http://github.com/don/cordova-plugin-hello">http://github.com/don/cordova-plugin-hello</a>
                    </small>
                </section>
                
                <section>
                    <h2>JavaScript</h2>
                </section>
                
                <section>
                    <h2></h2>
                    <pre><code>
var service = "Hello",
    action = "greet",
    args = ["World"];

cordova.exec(success, failure, 
    service, action, args);
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                
                <section>
                    <pre><code>
var success = function (result) {
    alert (result);     
}

var failure = function (error) {
    alert ("Error " + error)
}
                    </code></pre>                    
                </section>

                <section>
                    <h2></h2>
                    <pre><code>
var greet = function (name, success, failure) {
    cordova.exec(success, failure, 
        "Hello", "greet", [name]);      
}

greet("World", success, failure);
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                
                <section>
                    <h2></h2>
                    <pre><code>
cordova.define("cordova/plugin/hello",
  function (require, exports, module) {

    var exec = require('cordova/exec');

    function greet(name, win, fail) {
      exec(win, fail, "Hello",
          "greet", [name]);
    }

    module.exports = {
      greet: greet
    }
  }
);                        
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                
                <section>
                    <h2></h2>
                    <pre><code>
var hello = cordova.require('cordova/plugin/hello');

var success = function (result) {
        alert(result);      
    }, 
    failure = function (error) {
        alert("ERROR " + error);
    };

hello.greet("World", success, failure);
                    </code></pre>
                    <aside class="notes">
                        This code would be in index.js
                        
                        index.html would need to include the hello.js where the module is defined
                    </aside>
                </section>
                
                <section>
                    <h2>Android</h2>
                </section>
                
                <section>
                    <h2></h2>
                    <pre><code contenteditable>public class Hello extends CordovaPlugin {

    public boolean execute(String action, JSONArray data, CallbackContext callbackContext) throws JSONException {

        if (action.equals("greet")) {

            String name = data.getString(0);
            String message = "Hello, " + name;
            callbackContext.success(message);
            
            return true;
        } else {
            return false;
        }
    }
}
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                                
                <section>
                    <p>config.xml</p>
                    <pre><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;cordova&gt;
    &lt;plugins&gt;
        &lt;plugin name="App" value="org.apache.cordova.App"/&gt;
        &lt;plugin name="Camera" 
            value="org.apache.cordova.CameraLauncher"/&gt;
        &lt;!-- ... --&gt;
        &lt;plugin name="Hello" value="com.example.plugin.Hello"/&gt;
    &lt;/plugins&gt;
&lt;/cordova&gt;
                    </code></pre>
                    <aside class="notes">
                        TODO thin out
                        Mention that base Cordova functionality is plugins
                    </aside>
                </section>

                <section>
                    <p style="font-size: 1.8em">iOS</p>
                </section>
                
                <section>
                    <h2></h2>
                    <pre><code>
#import &lt;Cordova/CDVPlugin.h&gt;

@interface HWPHello : CDVPlugin

- (void) greet:(CDVInvokedUrlCommand*)command;

@end
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>

                <section>
                    <h2></h2>
                    <pre><code>#import "HWPHello.h"

@implementation HWPHello

- (void)greet:(CDVInvokedUrlCommand*)command
{
    NSString* callbackId = [command callbackId];
    NSString* name = [[command arguments] objectAtIndex:0];
    NSString* msg = [NSString stringWithFormat:@"Hello, %@", name];

    CDVPluginResult* result = [CDVPluginResult
                            resultWithStatus:CDVCommandStatus_OK
                            messageAsString:msg];

    [self success:result callbackId:callbackId];
}

@end
                    </code></pre>
                    <aside class="notes">
                    </aside>
                </section>
                
                <section>
                    <p>Cordova.plist</p>                    
                    <img src="images/cordova.plist.png" />
                </section>
                
                <!-- new section -->                

                <section>
                    <h2>pluginstall</h2>
                    <a href="https://github.com/alunny/pluginstall">https://github.com/alunny/pluginstall</a>
                </section>  
                
                <section>
                    <p>Plugin Specification</p>
                    <a href="https://github.com/alunny/cordova-plugin-spec">https://github.com/alunny/cordova-plugin-spec</a>
                </section>                   
                                
                <section>
                    <pre><code contenteditable>
$ pluginstall 
Usage: 
  pluginstall [platform] [project directory] [plugin directory]
                    </code></pre>
                </section>              

                <section>
                    <pre><code contenteditable>
$ pluginstall android /tmp/foo ~/cordova-plugin-hello
plugin installed                        
                    </code></pre>
                    <aside class="notes">
                        Almost too easy
                        Install the class files
                        Edit the plugin configuration
                        Edit the manifest
                        You still need to include the plugin's javascript in your HTML
                    </aside>
                </section>       
                
                <section>
                    <p>More details about using pluginstall</p>
                    <a href="http://goo.gl/5QNLO">Chariot Solutions Blog</a>                    
                    <aside class="notes">
                        http://blog.chariotsolutions.com/2012/11/installing-phonegap-plugins-with.html
                        This is still new and a work in progress
                        Ideally there will a NPM type installer in the future
                    </aside>
                </section>
                
                <!-- new section -->
                                
                <section>
                    <h2>Ripple</h2>
                    <a href="http://emulate.phonegap.com">http://emulate.phonegap.com</a>
                    <aside class="notes">
                        Chrome Plugin
                        Emulates the Cordova API calls
                        Tiny Hippos / Blackberry
                    </aside>
                </section>
                
                <section>
                    <img src="images/ripple_home.png" />
                </section>

                <section>
                    <img src="images/ripple.png" />
                </section>

                <section>
                    <h2>Weinre</h2>
                    <a href="http://debug.phonegap.com">http://debug.phonegap.com</a>
                    <aside class="notes">
                        Need to add a line to your index.html to include the javascript 
                        IBM
                    </aside>
                </section>

                <section>
                    <img src="images/weinre_home.png" />
                </section>

                <section>
                    <img src="images/weinre.png" />
                </section>
                                
                <section>
                    <p>Other ways to debug</p>
                    <aside class="notes">
                    console.log<br/>
                    use chrome, disable security
                    paste a shim in for the stuff you care about
                    
                    Debug native code in Xcode or IntelliJ or Visual Studio<br/>
                    Debug embedded webview with Safari or Chrome tools
                    </aside>
                </section>
                
                <!-- new section -->                
                
                <section>
                    <h2>PhoneGap Build</h2>
                    <a href="http://build.phonegap.com/">http://build.phonegap.com/</a>
                    <aside class="notes">
                        Commercial Service, recently out of beta.
                        Saves you from having to install SDKs.

                        iOS, Android, Windows Phone, Blackberry, WebOS, Symbian

                        Only limited plugins available

                        Still need the SDKs installed.
                        Get app working on one platform, then use PGBuild

                        Upload keys to server for signing

                        There is an API to automate, so you don't need to use the GUI
                    </aside>
                </section>
                                
                <section>
                    <img src="images/phonegap_build_home.png" />
                </section>

                <section>
                    <p>Sample Application</p>
                    <a href="https://github.com/phonegap/phonegap-start">https://github.com/phonegap/phonegap-start</a>
                </section>

                <section>
                    <img src="images/phonegap_build_hello.png" />
                </section>
                
                <section>
                    <img src="images/phonegap_build_public_page.png" />
                </section>

                <section>
                    <h1>Questions?</h1>
                </section>

                <section>
                    <h2>Thank You</h2>
                    <p>Don Coleman</p>
                    <p>Chariot Solutions</p>
                    <a href="mailto:don@chariotsolutions.com">don@chariotsolutions.com</a><br/>				    
				    <a href="http://twitter.com/doncoleman">@doncoleman</a>
                </section>
   						
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
                rollingLinks: false,
                
				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>