<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Don Coleman - Building Bluetooth Apps with Ionic</title>

        <meta name="description" content="Building Bluetooth Apps with Ionic">
        <meta name="author" content="Don Coleman">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <!-- <link rel="stylesheet" href="css/theme/black.css" id="theme"> -->
        <link rel="stylesheet" href="css/theme/sky.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <!-- hack the style a bit -->
        <style>

         .reveal pre {
            font-size: 1em;
            width: 100%;
          }

          .reveal h1,
          .reveal h2,
          .reveal h3,
          .reveal h4,
          .reveal h5,
          .reveal h6 {
            text-transform: none;
          }

          .reveal section img {
              border: none;
              box-shadow:0 0 0px;
          }

          .reveal ul {
            list-style-type: none
          }

          html.intro body {
	          background:url("images/arduino-bluetooth.jpg");
	          background-position:center;
	          background-size: 100%;
          }

      </style>
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
          <div class="slides">

            <!-- Ken's awesome photo, can I put his name on the slide? -->
            <section data-state="intro">
              <!--<span style="color:#b7b7b7; position: absolute; margin-top: 70%; margin-left: -550px;font-size:0.5em">photo by ken rimple</span>-->
              <!--<span style="color:#a3a3a3; position: absolute; margin-top: 70%; margin-left: 310px;font-size:0.5em">photo by ken rimple</span>-->
            </section>

            <section>
              <h3>Building Bluetooth Apps with Ionic</h3>
              <p>Ionic Philadelphia - December 7, 2017</p>
              <p>Don Coleman - <a href="http://twitter.com/doncoleman">@doncoleman</a></p>              
            </section>

            <section>
              <img src="images/bluetooth.png">
            </section>

            <section>
              <img src="images/iOS-Arduino-Bluetooth.png">
            </section>

            <section>
              <!-- based on - Figure 3.1 from “Bluetooth Low Energy” by Robin Heydon -->
              <img width="60%" src="images/architecture.svg">
              <small>Based on Figure 3.1 from “Bluetooth Low Energy” by Robin Heydon</small>
            </section>

            <section>
              <h2>Lightbulb Service</h2>
                <ul>
                  <li>Light Switch</li>
                  <li>Dimmer Setting</li>
                  <li>Power Consumption</li>
                </ul>
            </section>

            <section>
              <h2>Lightbulb Service - FF10</h2>
              <img src="images/uuid.png" />
            </section>

            <section>
              <h2>16 bit UUIDs</h2>
              <p style="color:#888">0000<span style="color:#000"><b>FF10</b></span>-0000-1000-8000-00805F9B34FB</p>
              <p style="color:#888">0000<span style="color:#000"><b>FF11</b></span>-0000-1000-8000-00805F9B34FB</p>
              <p style="color:#888">0000<span style="color:#000"><b>FF12</b></span>-0000-1000-8000-00805F9B34FB</p>
              <p style="color:#888">0000<span style="color:#000"><b>FF16</b></span>-0000-1000-8000-00805F9B34FB</p>
            </section>

            <section>
              <h2>Lightbulb Service - FF10</h2>
              <img src="images/lightbulb-service.png" />
            </section>

            <section>
              <h2>Advertising</h2>
              <img width="50%" src="images/advertise.svg" />
            </section>

            <section>
              <h2>Advertising</h2>
              <ul>
                <li>MAC Address: AA:BB:CC:DD:EE:FF</li>
                <li>Services: [ 0x180A, 0xFF10, 0XFF20, …] </li>
                <li>Manufacturer Data: <00007465 6d70></li>
                <li>Connectable: True</li>
                <li>TX Power Level: 4</li>
                <li>RSSI: -80</li>
                <li>Name: Smart Lightbulb</li>
              </ul>
            </section>

            <section>
              <h2>Advertising</h2>
              <ul>
                <li>5425B44A-024A-4D39-88D2-D9F016199B29</li>
                <li>Services: [ 0x180A, 0xFF10, 0XFF20, …] </li>
                <li>Manufacturer Data: <00007465 6d70></li>
                <li>Connectable: True</li>
                <li>TX Power Level: 4</li>
                <li>RSSI: -80</li>
                <li>Name: Smart Lightbulb</li>
              </ul>
            </section>

            <section>
              <img width="100%" src="images/ble_advertisement.png" />
            </section>

            <section>
              <img width="100%" src="images/ble_connection.png" />
            </section>

            <!--<section>
              <h2>Connect</h2>
              <img width="80%" src="images/connect.svg" />
            </section>-->
            
            <section>
              <h2>After Connecting...</h2>
              <!-- discover -->
              <ul>
              <li>Get a list of services</li>
              <li>For each service, get a list of characteristics</li>
              <li>For each characteristic, get properties</li>
              <li>Save handle to read or write later</li>
              <li>Subscribe to be notified on changes</li>
              <ul>
            </section>

           <section>
              <h2>Read Value</h2>
              <img width="80%" src="images/read.svg">
            </section>

            <section>
              <h2>Write Value</h2>
              <img width="80%" src="images/write.svg">
            </section>

             <section>
              <h2>Write Command</h2>
              <img width="80%" src="images/command.svg">
            </section> 

            <section>
              <h2>Heart Rate Service -180d</h2>
              <img src="images/heart_rate_service.png" />
              <small>
              <a href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.heart_rate.xml">org.bluetooth.service.heart_rate.xml</a><br/>
              <a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml">org.bluetooth.characteristic.heart_rate_measurement.xml</a>
              </small>
            </section>
            
             <section>
              <h2>Notification</h2>
              <img width="80%" src="images/notification.svg">
            </section> 

             <section>
              <h2>Indication</h2>
              <img width="80%" src="images/indication.svg">
            </section> 

            <section>
              <img width="100%" src="images/data_transfer.png" />
            </section>

             <section>
              <h2>Peripheral</h2>
              <p>Provides services</p>
            </section>

            <section>
              <h2>Central</h2>
              <p>Uses services on a peripheral</p>
            </section> 

            <section>
              <h2>Lightbulb Service - FF10</h2>
              <img src="images/lightbulb-service.png" />
            </section>

            <section>
                <img width="75%" src="images/robosmart.jpg" />
            </section>

            <section>
                <img width="38%" src="images/lightblue-peripherals.png" />
            </section>
            <section>
                <img width="38%" src="images/lightblue-service.png" />
            </section>
            <section>
                <img width="38%" src="images/lightblue-characteristic.png" />
            </section>

            <section>
              <img src="images/ionic.png"/>
            </section>

            <section>
              <img src="images/Apache_Cordova.png"/>
            </section>

            <section>
              <h3>cordova-plugin-ble-central</h3>
              <img src="images/npm-cordova-plugin-ble-central.png"/>
              <p><small><a href="https://github.com/don/cordova-plugin-ble-central">github.com/don/cordova-plugin-ble-central</a></small></p>
            </section>

            <section>
              <h2>Ionic Native</h2>
              <img src="images/Ionic_Native_-_BLE.png">
              <p><small><a href="https://ionicframework.com/docs/native/ble/">ionicframework.com/docs/native/ble</a></small></p>
            </section>

            <section>
              <h2>Scanning for BLE devices</h2>
            </section>

            <section>
              <h2>Create a project</h2>
              <ul>
                <li>$ ionic start scan blank -n Scan</li>
                <li>$ cd ./scan</li>
              </ul>
            </section>

            <section width="1000px">
              <h2>Install the Bluetooth plugin</h2>
              <ul style="font-size:0.9em">
              <li>$ ionic cordova plugin add cordova-plugin-ble-central</l1>
              <li>$ npm install --save @ionic-native/ble</l1>
              </ul>
            </section>

            <section>
              <img src="images/scan-directories.png" width="75%"/>
            </section>

            <section>
              <img src="images/app_module_ts-add_BLE.png" width="70%"/>
            </section>

            <!-- Scan -->
            <section>
              <h2>Scan API</h2>
              <ul style="font-size:0.9em">
              <li>scan(services: string[], seconds: number): Observable<any></li>
              </ul>
            </section>

            <section>
              <img src="images/home_ts_—_scan_-_devices.png"/>
              <p><small>src/pages/home/home.ts</small></p>
            </section>
            <section>
              <img src="images/home_ts_—_scan.png"/>
              <p><small>src/pages/home/home.ts</small></p>
            </section>
            <section>
              <img src="images/home_ts_—_onDeviceDiscovered.png"/>
              <p><small>src/pages/home/home.ts</small></p>
            </section>

            <section>
              <h2>NgZone</h2>
            </section>

            <section>
              <img src="images/scan-discovered-device-ios-json.png"/>
            </section>

            <section>
              <img src="images/home_html_—_scan.png"/>
              <p><small>src/pages/home/home.html</small></p>
            </section>
            <section>
              <img src="images/home_html_—_list.png"/>
              <p><small>src/pages/home/home.html</small></p>
            </section>

            <section>
              <h2>Run the App</h2>
              <ul>
                <li>$ ionic cordova run android --device</li>
              </ul>
              <p>
                <small>NOTE: must run on real hardware</small>
              </p>
            </section>

            <section>
              <img src="images/scan-android-permission_framed.png" width="43%"/>
            </section>

            <section>
              <img src="images/scan-android-screenshot_framed.png" width="43%"/>
            </section>
            
            <section>
              <img src="images/scanner-screenshot_framed.png" width="33%"/>
            </section>

            <!-- Connect -->
            <section>
              <h2>Connect API</h2>
              <ul>
              <li>connect(deviceId: string): Observable<any></li>
              </ul>
            </section>
            
            <section>
              <img src="images/home_html_—_connect_-_list.png"/>
              <p><small>src/pages/home/home.html</small></p>
            </section>

            <section>
              <p>$ ionic generate page detail</p>
              <img src="images/connect-directories.png" width="60%"/>
            </section>

            <section>
              <img src="images/home_ts_—_connect_-_deviceSelected.png"/>
              <p><small>src/pages/home/home.ts</small></p>
            </section>

            <section>
              <img src="images/detail_ts_—_connect_-_constructor.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/detail_ts_—_connect_-_onConnected.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>            

            <section>
              <img src="images/peripheral-json.png" width="90%"/>
            </section>

            <section>
              <img src="images/detail_html_—_connect.png"/>
            </section>

            <section>
              <img src="images/detail_ts_—_connect_-_ionViewWillLeave.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>  
       
            <section>
              <img src="images/connect-screenshot.png" width="70%"/>
            </section>

            <!-- Lightbulb -->

           <section>
              <h2>Lightbulb Service - FF10</h2>
              <img src="images/lightbulb-service-2.png" />
            </section>

            <section>
              <h2>Write API</h2>
              <p style="text-align:left">
              write(</br>
    &nbsp;&nbsp;&nbsp;&nbsp;deviceId: string,</br>
    &nbsp;&nbsp;&nbsp;&nbsp;serviceUUID: string,</br>
    &nbsp;&nbsp;&nbsp;&nbsp;characteristicUUID: string,</br>
    &nbsp;&nbsp;&nbsp;&nbsp;value: ArrayBuffer</br>
    ): Promise<any>
      </p>
            </section>

            <section>
              <img src="images/home_ts_—_light_-_const.png"/>
              <img src="images/home_ts_—_light_-_scan.png"/>
              <p><small>src/pages/home/home.ts</small></p>
            </section>


            <section>
              <img src="images/power-toggle.png" width="50%"/>
              <img src="images/detail_html_—_light_-_power.png"/>
              <p><small>src/pages/detail/detail.html</small></p>
            </section>            

            <section>
              <img src="images/detail_ts_—_light_-_onPowerSwitchChange.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>
            
            <section>
              <img src="images/dimmer-range.png" width="50%"/>
              <img src="images/detail_html_—_light_-_brightness.png"/>
              <p><small>src/pages/detail/detail.html</small></p>
            </section>            
          
            <section>
              <img src="images/detail_ts_—_light_-_setBrightness.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <image src="images/light-screenshot_framed.png" width="34%"/>
            </section>

            <section>
              <h2>Read API</h2>
              <p style="text-align:left">
              read(<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;deviceId: string,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;serviceUUID: string,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;characteristicUUID: string<br/>
    ): Promise<any>
              </p>
            </section>

            <section>
              <img src="images/detail_ts_—_light_-_onConnected.png" width="75%"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>
            
            <section>
              <img src="images/detail_ts_—_light_-_onConnected2.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <!-- BUTTON -->
            <section>
              <img src="images/cc2650-sensor-tag.png"/>
            </section>

            <section>
              <h2>Simple Key Service - FFE0</h2>
              <img src="images/simple-key-service.png"/>
            </section>

            <section>
              <h2>Notification API</h2>
              <p style="text-align:left">
              startNotification(</br>
    &nbsp;&nbsp;&nbsp;&nbsp;deviceId: string,</br>
    &nbsp;&nbsp;&nbsp;&nbsp;serviceUUID: string,</br>
    &nbsp;&nbsp;&nbsp;&nbsp;characteristicUUID: string</br>
    ): Observable<any>
      </p>
            </section>

            <section>
              <img src="images/detail_ts_—_button_-_onConnected.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/detail_ts_—_button_-_startNotification.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/detail_ts_—_button_-_onButtonStateChange.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/button-screenshot-1_framed.png" width="34%"/>
            </section>

            <!-- Thermometer -->
            <section>
              <h2>Thermometer Service - bbb0</h2>
              <img src="images/thermometer_service.png" />
            </section>

            <section>
              <img src="images/Thermometer_bb.png" width="57%" />
            </section>

            <section>
              <img src="images/detail_ts_—_thermometer_-_onConnected.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/detail_ts_—_thermometer_-_onTemperatureChange.png"/>
              <p><small>src/pages/detail/detail.ts</small></p>
            </section>

            <section>
              <img src="images/detail_html_—_thermometer.png"/>
              <p><small>src/pages/detail/detail.html</small></p>
            </section>            
            
            <section>
              <img src="images/format-temperature-c_ts_—_thermometer.png"/>
              <p><small>src/pipes/format-temperature-c/format-temperature-c.ts</small></p>
            </section>

            <section>
              <img src="images/format-temperature-f_ts_—_thermometer.png" width="75%"/>
              <p><small>src/pipes/format-temperature-f/format-temperature-f.ts</small></p>
            </section>
            
            <section>
              <image src="images/thermometer-screenshot_framed.png" width="34%"/>
            </section>

            <section>
              <image src="images/arduino-bluetooth.jpg">
            </section>

            <!-- <section>
              <image src="images/NeoPixel_bb.png" />
            </section> -->

            <section>
              <image src="images/neopixel-screenshot_framed.png" width="34%"/>
            </section>

            <!--
            <section>
              <h2>Hardware</h2>
            </section>

            <section>
              <h3>Arduino 101</h3>
              <img src="images/Arduino101.jpg"><br/>
              <small><a href="https://www.arduino.cc/en/Main/ArduinoBoard101">https://www.arduino.cc/en/Main/ArduinoBoard101</a></small>
            </section>

            <section>
              Micro::Bit
            </section>
            -->

            <section>
              <img width="50%" src="http://makebluetooth.com/images/BluetoothBook_Cover.png"><br/>
              <small><a href="http://makebluetooth.com">makebluetooth.com</a></small>
            </section>

            <section>
 <h2>Thank You</h2>
                <p>Don Coleman - Chariot Solutions</p>
                <p><a href="http://twitter.com/doncoleman">@doncoleman</a></p>
                <p>
                    <a href="mailto:&#100;&#111;&#110;&#0064;&#99;&#104;&#97;&#114;&#105;&#111;&#116;&#115;&#111;&#108;&#117;&#116;&#105;&#111;&#110;&#115;.&#99;&#111;&#109;">&#100;&#111;&#110;&#0064;&#99;&#104;&#97;&#114;&#105;&#111;&#116;&#115;&#111;&#108;&#117;&#116;&#105;&#111;&#110;&#115;.&#99;&#111;&#109;</a>
                </p>
                <p>
                Slides <a href="http://don.github.io/slides/2017-12-07-ionic-philadelphia">
                    http://don.github.io/slides/</a>
                </p>
                Code <a href="http://github.com/don/ionic-ble-examples">
                    http://github.com/don/ionic-ble-examples</a>
                </p>

                <p>&nbsp;</p>
                <p>
                <small>
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Building Bluetooth Apps with Ionic</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://don.github.io/slides/2017-12-07-ionic-philadelphia" property="cc:attributionName" rel="cc:attributionURL">Don Coleman</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
                </small>
                </p>
            </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: false,
                history: true,
                center: true,
                // width: '100%',
                // height: '100%',

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]

            });

        </script>

    </body>
</html>
